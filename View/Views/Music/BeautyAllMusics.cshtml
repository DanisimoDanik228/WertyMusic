@model IEnumerable<Domain.Models.Music>

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è</title>
</head>
<body>
<div class="container">
    <div class="header">
        <h1 class="page-title">–ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è</h1>
        <div class="song-count">–ü–µ—Å–µ–Ω: @Model.Count()</div>
    </div>
        
        
    <form asp-action="DownloadZipIds" method="post">
        <div class="zip-download-container">
            <div class="nav-links">
                <a href="/" >–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
                <button class="btn-zip" type="submit">
                    üì• –°–∫–∞—á–∞—Ç—å
                </button>
            </div>
        </div>
        <table class="music-table">
            <thead>
            <tr>
                <th><input type="checkbox" id="selectAll"/></th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</th>
                <th>–†–µ—Å—É—Ä—Å</th>
                <th>–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ</th>
            </tr>
            </thead>
            <tbody>
            @foreach (var song in Model)
            {
                <tr>
                    <td>
                        <input type="checkbox" name="selectedIds" value="@song.Id" class="song-checkbox"/>
                    </td>
                    <td class="music-name">@song.MusicName</td>
                    <td class="artist-name">@song.ArtistName</td>
                    <td class="source-name">@song.SiteSource</td>
                    <td><a href="@song.DownloadUrl" class="download-link" target="_blank" rel="noopener noreferrer">–°–∫–∞—á–∞—Ç—å</a></td>
                </tr>
            }
            </tbody>
        </table>
    </form>
        
    @if (!Model.Any())
    {
        <div class="empty-message">–í –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –ø–æ–∫–∞ –Ω–µ—Ç –º—É–∑—ã–∫–∏</div>
    }
    <div class="footer">
        –ú—É–∑—ã–∫–∞–ª—å–Ω–∞—è –∫–æ–ª–ª–µ–∫—Ü–∏—è &copy; 2023
    </div>
</div>
<script>
    const selectAll = document.getElementById('selectAll');
    const rowCheckboxes = document.querySelectorAll('.song-checkbox');

    selectAll.addEventListener('change', function() {
        rowCheckboxes.forEach(cb => {
            cb.checked = selectAll.checked;
        });
    });

    rowCheckboxes.forEach(cb => {
        cb.addEventListener('change', function() {
            const checkedCount = document.querySelectorAll('.song-checkbox:checked').length;
            const totalCount = rowCheckboxes.length;

            selectAll.checked = checkedCount === totalCount;
            selectAll.indeterminate = checkedCount > 0 && checkedCount < totalCount;
        });
    });
</script>
</body>
</html>